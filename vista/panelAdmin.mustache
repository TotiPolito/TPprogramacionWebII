<link rel="stylesheet" href="{{BASE_URL}}/public/style/style.css">
<link rel="stylesheet" href="{{BASE_URL}}/public/style/headerFooter.css">
<link rel="stylesheet" href="{{BASE_URL}}/public/style/panelAdmin.css">

<h2>Panel de Administración</h2>
<p>Bienvenido, {{nombre_completo}}</p>

<div class="estadisticas">
    <h3>Estadísticas generales</h3>
    <ul>
        <li>Total de usuarios: {{estadisticas.total_usuarios}}</li>
        <li>Total de jugadores: {{estadisticas.total_jugadores}}</li>
        <li>Total de partidas: {{estadisticas.total_partidas}}</li>
        <li>Puntaje promedio: {{estadisticas.promedio_puntaje}}</li>
        <li>Mejor jugador: {{estadisticas.mejor_jugador.usuario}} ({{estadisticas.mejor_jugador.puntaje}} pts)</li>
    </ul>

    <canvas id="grafico"></canvas>

    <form id="filtros">
        <label>Desde: <input type="date" name="fecha_inicio"></label>
        <label>Hasta: <input type="date" name="fecha_fin"></label>
        <button type="submit">Filtrar</button>
    </form>

    <button id="descargarPDF">Descargar PDF</button>
</div>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
    const ctx = document.getElementById('grafico');
    new Chart(ctx, {
        type: 'bar',
        data: {
            labels: ['Usuarios', 'Jugadores', 'Partidas'],
            datasets: [{
                label: 'Totales',
                data: [
                    {{estadisticas.total_usuarios}},
                    {{estadisticas.total_jugadores}},
                    {{estadisticas.total_partidas}}
                ]
            }]
        }
    });

    document.getElementById('descargarPDF').addEventListener('click', () => {
        window.location.href = '/TPprogramacionWebII/Admin/descargarPDF';
    });
</script>
